太对了 👍
**压测这种事，本机真不适合硬扛**，Ubuntu 才是正解。
下面我给你一份 **「在 Ubuntu 上 30 分钟内搭好可用压测环境」的流程文档**，按步骤走，**基本不会踩坑**。

> 目标环境：
> **Ubuntu 20.04 / 22.04 / 24.04（推荐）**
> **Python 3.11 + Selenium + Chrome + ChromeDriver**
> **支持多进程会议压测**

---

# 🧭 Ubuntu 会议压测环境快速搭建流程文档

---

## 0️⃣ 前置准备（服务器规格建议）

最低可跑：

* 2 vCPU
* 4 GB RAM

推荐压测：

* 4 vCPU
* 8 GB RAM（10–30 并发）
* 16 GB RAM（50+ 并发）

---

## 1️⃣ 系统初始化

```bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y \
  curl wget unzip git \
  ca-certificates gnupg lsb-release \
  software-properties-common
```

---

## 2️⃣ 安装 Google Chrome（官方稳定版）

### 添加 Google 源

```bash
wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo gpg --dearmor -o /usr/share/keyrings/google-linux.gpg
echo "deb [arch=amd64 signed-by=/usr/share/keyrings/google-linux.gpg] http://dl.google.com/linux/chrome/deb/ stable main" \
 | sudo tee /etc/apt/sources.list.d/google-chrome.list
```

### 安装 Chrome

```bash
sudo apt update
sudo apt install -y google-chrome-stable
```

### 验证

```bash
google-chrome --version
```

---

## 3️⃣ 安装 ChromeDriver（版本严格匹配）

### 1️⃣ 查看 Chrome 版本

```bash
google-chrome --version
```

示例输出：

```
Google Chrome 145.0.7632.26
```

### 2️⃣ 下载对应版本 Chromedriver

👉 官方地址
[https://googlechromelabs.github.io/chrome-for-testing/](https://googlechromelabs.github.io/chrome-for-testing/)

选择：

* **Chromedriver**
* **linux64**
* **版本 = Chrome 主版本**

```bash
wget https://storage.googleapis.com/chrome-for-testing-public/145.0.7632.26/linux64/chromedriver-linux64.zip
```

### 3️⃣ 安装

```bash
unzip chromedriver-linux64.zip
sudo mv chromedriver-linux64/chromedriver /usr/local/bin/chromedriver
sudo chmod +x /usr/local/bin/chromedriver
```

### 4️⃣ 验证

```bash
chromedriver --version
chromedriver --port=9515
```

看到 `Starting ChromeDriver...` 即成功（Ctrl+C 退出）

---

## 4️⃣ 安装 Python 3.11（推荐）

```bash
sudo add-apt-repository ppa:deadsnakes/ppa -y
sudo apt update
sudo apt install -y python3.11 python3.11-venv python3.11-dev
```

### 设置虚拟环境

```bash
python3.11 -m venv venv
source venv/bin/activate
```

---

## 5️⃣ 安装 Python 依赖

```bash
pip install --upgrade pip
pip install selenium
```

> ⚠️ **不要安装 webdriver-manager**

---

## 6️⃣ 放置你的压测代码

```bash
mkdir -p meet-stress
cd meet-stress
nano meet_stress_test.py
```

👉 把我上条消息给你的 **完整代码** 粘进去即可。

---

## 7️⃣ Ubuntu 必须装的运行库（很关键）

Chrome headless 在 Ubuntu **必须有这些库**：

```bash
sudo apt install -y \
  fonts-liberation \
  libasound2 \
  libatk-bridge2.0-0 \
  libatk1.0-0 \
  libcups2 \
  libdbus-1-3 \
  libdrm2 \
  libgbm1 \
  libnspr4 \
  libnss3 \
  libxcomposite1 \
  libxdamage1 \
  libxrandr2 \
  libxshmfence1 \
  xdg-utils
```

**不装这些 → Chrome 直接起不来**

---

## 8️⃣ 先跑一个最小验证（强烈建议）

```bash
python meet_stress_test.py
```

观察：

* Chrome 进程是否启动
* 日志是否正常输出
* CPU / 内存是否暴涨

---

## 9️⃣ 并发调优建议（很实用）

| 并发数 | 建议内存    |
| --- | ------- |
| 5   | 2–4 GB  |
| 10  | 4–6 GB  |
| 20  | 8–12 GB |
| 50  | 16+ GB  |

### 可调参数

```python
TOTAL_USERS = 10
MEETING_DURATION = 300
JOIN_DELAY_MAX = 5
```

---

## 🔒 10️⃣（可选）服务器优化建议

```bash
ulimit -n 65535
```

关闭不必要服务：

```bash
sudo systemctl stop snapd
```

---

## 🧠 常见坑位速查

| 问题               | 原因    |
| ---------------- | ----- |
| Chrome 起不来       | 缺系统库  |
| chromedriver 连不上 | 版本不匹配 |
| 进程秒退             | 内存不够  |
| CPU 100%         | 并发太高  |

---

## 🚀 下一步我可以继续帮你

如果你愿意，我可以直接给你：

* 🐳 **Docker 一键压测版**
* 📊 **Prometheus / Grafana 监控**
* 🔁 **梯度并发自动脚本**
* 🧪 **会议成功率统计版代码**

你只要回一句：

> **“我在 Ubuntu 上了，下一步”**

我就继续陪你把这个压测工具打磨到「生产级」👊
